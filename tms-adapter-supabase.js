(function(){const T=['trucks','trailers','expenses','repairs','invoices'];function hook(){if(typeof window.read!=='function'||typeof window.write!=='function'){setTimeout(hook,200);return}const _r=window.read,_w=window.write;async function g(t){const r=await fetch('/api/tables/'+t,{cache:'no-store'});if(!r.ok)throw 0;return r.json()}async function p(t,a){const r=await fetch('/api/tables/'+t,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(Array.isArray(a)?a:[])});if(!r.ok)throw 0;return 1}window.read=k=>{f(k);return _r(k)};window.write=(k,v)=>m(k,v);async function m(k,v){try{const t=String(k||'').split(':')[1];if(!T.includes(t)){_w(k,v);return}const a=Array.isArray(v)?v:(v?[v]:[]);await p(t,a);const s=await g(t);_w(k,s)}catch(e){_w(k,v)}}async function f(k){try{const t=String(k||'').split(':')[1];if(T.includes(t)){const s=await g(t);_w(k,s)}}catch(e){}}(async()=>{for(const t of T){try{const s=await g(t);_w('tms:'+t,s)}catch(e){}}})();}hook()})();